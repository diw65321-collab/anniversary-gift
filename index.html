<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Our 4th Anniversary</title>

<link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;600&family=Dancing+Script:wght@700&display=swap" rel="stylesheet">

<style>
/* --- ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏™‡∏µ‡πÅ‡∏•‡∏∞‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ --- */
:root {
    --primary: #ff5c8a;    /* ‡∏™‡∏µ‡∏ä‡∏°‡∏û‡∏π‡πÄ‡∏Ç‡πâ‡∏°‡∏Ç‡∏∂‡πâ‡∏ô‡∏ô‡∏¥‡∏î‡∏ô‡∏∂‡∏á‡πÉ‡∏´‡πâ‡∏ï‡∏±‡∏ß‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠‡∏ä‡∏±‡∏î */
    --secondary: #ffc2d1;
    --bg-gradient: linear-gradient(-45deg, #ff9a9e, #fad0c4, #fad0c4, #fbc2eb);
    --text: #590d22;
    --glass: rgba(255, 255, 255, 0.85);
    --shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.15);
}

body {
    margin: 0;
    font-family: 'Kanit', sans-serif;
    color: var(--text);
    overflow-x: hidden;
    /* Animated Background */
    background: var(--bg-gradient);
    background-size: 400% 400%;
    animation: gradientBG 15s ease infinite;
}

@keyframes gradientBG {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
}

/* --- Screen Styles --- */
.screen {
    display: none;
    min-height: 100vh;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    padding: 24px;
    text-align: center;
    opacity: 0;
    transition: opacity 0.8s ease;
}
.screen.active { display: flex; opacity: 1; }

/* --- Page 1: Hero --- */
.photo-frame {
    width: 280px;
    height: 380px;
    background: #fff;
    padding: 15px 15px 50px 15px;
    border-radius: 10px;
    box-shadow: var(--shadow);
    transform: rotate(-3deg);
    margin-bottom: 30px;
    transition: transform 0.3s;
    /* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏£‡∏≠‡∏ö‡∏£‡∏π‡∏õ‡∏ã‡πâ‡∏≠‡∏ô */
    position: relative;
}
.photo-frame:hover { transform: rotate(0deg) scale(1.02); }
.photo-frame::before {
    content: ''; position: absolute; top: -10px; left: -10px; right: -10px; bottom: -10px;
    border: 2px dashed rgba(255,255,255,0.6); border-radius: 15px; z-index: -1;
}

.photo-frame img {
    width: 100%; height: 100%; object-fit: cover; border-radius: 4px;
}

h1 {
    font-family: 'Dancing Script', cursive;
    font-size: 3.5rem;
    color: #fff;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
    margin: 0;
}

/* --- Page 2: Timer --- */
.timer-box {
    background: var(--glass);
    backdrop-filter: blur(8px); /* Effect ‡∏Å‡∏£‡∏∞‡∏à‡∏Å‡∏ù‡πâ‡∏≤ */
    padding: 25px;
    border-radius: 24px;
    box-shadow: var(--shadow);
    margin: 25px 0;
    max-width: 400px;
    width: 100%;
    border: 1px solid rgba(255, 255, 255, 0.4);
}
.time-unit { display: inline-block; padding: 10px; }
.number { font-size: 2.2rem; font-weight: 700; color: var(--primary); display: block; line-height: 1;}
.label { font-size: 0.8rem; color: #888; text-transform: uppercase; letter-spacing: 1px;}

/* --- Page 3: Gallery --- */
/* --- Page 3: Gallery (2 Columns) --- */
.gallery {
    display: grid;
    grid-template-columns: repeat(2, 1fr); /* 2 ‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå */
    gap: 30px;
    width: 100%;
    max-width: 900px;
    margin: 20px auto 60px;
}

/* ‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠‡πÉ‡∏´‡πâ‡πÄ‡∏´‡∏•‡∏∑‡∏≠ 1 ‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå */
@media (max-width: 768px) {
    .gallery {
        grid-template-columns: 1fr;
    }
}


.card {
    background: #fff;
    border-radius: 22px;
    overflow: hidden;
    box-shadow: var(--shadow);
    transition: 0.4s ease;
}
/* Class ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Scroll Reveal */
.card.show { opacity: 1; transform: translateY(0); }
.card:hover { transform: translateY(-10px); box-shadow: 0 20px 40px rgba(0,0,0,0.15); }

/* ‡∏£‡∏π‡∏õ/‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠ */
/* --- Media Box (‡πÅ‡∏ô‡∏ß‡∏ï‡∏±‡πâ‡∏á 4:5) --- */
.media-box {
    width: 100%;
    aspect-ratio: 4 / 5;   /* ‡πÅ‡∏ô‡∏ß‡∏ï‡∏±‡πâ‡∏á ‡∏î‡∏π‡∏™‡∏ß‡∏¢‡∏°‡∏≤‡∏Å‡∏Å‡∏±‡∏ö‡∏£‡∏π‡∏õ‡∏Ñ‡∏π‡πà */
    background: #000;
    display: flex;
    align-items: center;
    justify-content: center;
}

.media-box img,
.media-box video {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.card-content { padding: 20px; text-align: left; }
.year-badge {
    background: var(--secondary); color: var(--text);
    padding: 5px 12px; border-radius: 50px;
    font-size: 0.75rem; font-weight: 600;
    display: inline-block; margin-bottom: 8px;
}

/* --- Buttons --- */
.btn {
    background: linear-gradient(45deg, #ff9a9e 0%, #fecfef 99%, #fecfef 100%);
    color: var(--text);
    border: none;
    padding: 15px 40px;
    border-radius: 50px;
    font-size: 1.1rem;
    font-weight: 600;
    cursor: pointer;
    margin-top: 25px;
    box-shadow: 0 10px 20px rgba(255, 154, 158, 0.4);
    transition: transform 0.2s, box-shadow 0.2s;
}
.btn:hover { transform: scale(1.05); box-shadow: 0 15px 25px rgba(255, 154, 158, 0.6); }

/* --- Floating Hearts BG --- */
.heart-bg {
    position: fixed;
    color: #fff;
    font-size: 20px;
    pointer-events: none;
    animation: floatUp linear forwards;
    z-index: 0;
    text-shadow: 0 0 5px rgba(0,0,0,0.1);
}
@keyframes floatUp {
    to { transform: translateY(-120vh) rotate(360deg); opacity: 0; }
}

/* --- Click Burst Effect --- */
.burst-heart {
    position: absolute;
    pointer-events: none;
    animation: burst 0.8s ease-out forwards;
    font-size: 20px;
}
@keyframes burst {
    0% { transform: scale(0); opacity: 1; }
    100% { transform: translate(var(--tx), var(--ty)) scale(1.5); opacity: 0; }
}
.year-section {
    width: 100%;
    max-width: 900px;
    margin: 0 auto 80px;
}

.year-title {
    font-size: 2.2rem;
    font-weight: 600;
    margin: 50px 0 25px;
    text-align: left;
    color: #fff;
    text-shadow: 1px 2px 6px rgba(0,0,0,0.2);
}
.year-tabs {
    display: flex;
    gap: 12px;
    justify-content: center;
    margin: 20px 0 40px;
    flex-wrap: wrap;
}

.year-tabs button {
    padding: 10px 22px;
    border-radius: 999px;
    border: none;
    background: rgba(255,255,255,0.7);
    font-family: 'Kanit', sans-serif;
    font-weight: 600;
    cursor: pointer;
    transition: 0.3s;
}

.year-tabs button.active {
    background: var(--primary);
    color: white;
    box-shadow: 0 10px 20px rgba(0,0,0,0.2);
}

</style>
</head>

<body>

<audio id="bgMusic" loop>
    <source src="song.mp3" type="audio/mp3">
</audio>

<div id="screen1" class="screen active">
    <div class="photo-frame">
        <img id="mainPhoto" alt="Main Photo">
    </div>
    <h1 id="introText">...</h1>
    <p id="coupleName" style="font-size: 1.3rem; margin-top:10px; font-weight: 300;"></p>
    <button class="btn" onclick="nextScreen(2)">üíó ‡πÅ‡∏ï‡∏∞‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÑ‡∏õ‡∏ï‡πà‡∏≠</button>
</div>

<div id="screen2" class="screen">
    <h1 style="font-size: 2.5rem;">4 Years & Counting</h1>
    <div class="timer-box" id="timer">Loading...</div>
    
    <div style="min-height: 60px; max-width: 500px; margin-top: 20px;">
        <p id="purposeText" style="font-size: 1.1rem; line-height: 1.6;"></p>
    </div>

    <button class="btn" onclick="nextScreen(3)">üì∏ ‡∏î‡∏π‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏£‡∏á‡∏à‡∏≥‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤</button>
</div>

<div id="screen3" class="screen" style="justify-content: flex-start; padding-top: 60px;">
    <h1>Our Journey</h1>
    <p style="margin: 10px 0 30px; opacity: 0.8;">‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏ß‡πâ‡∏î‡∏π‡∏ï‡∏≠‡∏ô‡∏Ñ‡∏¥‡∏î‡∏ñ‡∏∂‡∏á‡∏Å‡∏±‡∏ô‡∏ô‡∏∞ üíï</p>

    <div id="yearTabs" class="year-tabs"></div>
    <div class="gallery" id="memoryGallery"></div>

    <button class="btn" onclick="location.reload()" style="margin-bottom: 50px;">‚Ü∫ ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</button>
</div>


<script>
let configData = {};

/* 1. Load Data & Initialize */
fetch('data.json').then(r => r.json()).then(data => {
    configData = data;
    document.getElementById('mainPhoto').src = data.main_photo;
    document.getElementById('introText').innerText = data.intro_message;
    document.getElementById('coupleName').innerText = data.couple_name;
    startTimer(data.start_date);
    
    // ‡∏™‡∏£‡πâ‡∏≤‡∏á Gallery
    
 const gallery = document.getElementById('memoryGallery');
const yearTabs = document.getElementById('yearTabs');

// ‡∏£‡∏ß‡∏° memories ‡∏ï‡∏≤‡∏°‡∏õ‡∏µ
const groupedByYear = {};
data.memories.forEach(m => {
    if (!groupedByYear[m.year]) groupedByYear[m.year] = [];
    groupedByYear[m.year].push(m);
});

// ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏õ‡∏∏‡πà‡∏°‡∏õ‡∏µ
Object.keys(groupedByYear).forEach((year, index) => {
    const btn = document.createElement("button");
    btn.innerText = year;
    if (index === 0) btn.classList.add("active");

    btn.onclick = () => {
        document.querySelectorAll('.year-tabs button')
            .forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        renderYear(year);
    };

    yearTabs.appendChild(btn);
});

// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô render ‡∏õ‡∏µ
function renderYear(year) {
    gallery.innerHTML = "";

    groupedByYear[year].forEach(m => {
        const media = m.img.toLowerCase().endsWith('.mp4')
            ? `<video controls playsinline loop muted>
                    <source src="${m.img}" type="video/mp4">
               </video>`
            : `<img src="${m.img}" alt="">`;

        gallery.innerHTML += `
            <div class="card">
                <div class="media-box">${media}</div>
                <div class="card-content">
                    <span class="year-badge">${m.year}</span>
                    <p>${m.caption}</p>
                </div>
            </div>
        `;
    });

    setupScrollReveal();
}

// ‡πÇ‡∏´‡∏•‡∏î‡∏õ‡∏µ‡πÅ‡∏£‡∏Å
renderYear(Object.keys(groupedByYear)[0]);


// ‡πÄ‡∏õ‡∏¥‡∏î scroll reveal
setupScrollReveal();


    // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏£‡∏∞‡∏ö‡∏ö Scroll Animation
    setupScrollReveal();
});

/* 2. Navigation Logic */
function nextScreen(n) {
    const current = document.querySelector('.screen.active');
    if (current) {
        current.classList.remove('active');
        setTimeout(() => current.style.display = 'none', 500);
    }

    const next = document.getElementById('screen' + n);
    next.style.display = 'flex';
    setTimeout(() => next.classList.add('active'), 50);

    if (n === 2) {
        playMusic();
        typeWriter(configData.purpose_message, document.getElementById('purposeText'));
    }
}


/* 3. Music Fade In */
function playMusic() {
    const music = document.getElementById('bgMusic');
    music.volume = 0;
    music.play().catch(e => console.log("Auto-play blocked"));
    
    let vol = 0;
    const fade = setInterval(() => {
        if (vol < 0.5) {
            vol += 0.05;
            music.volume = vol;
        } else {
            clearInterval(fade);
        }
    }, 200);
}

/* 4. Typing Effect (‡∏û‡∏¥‡∏°‡∏û‡πå‡∏ó‡∏µ‡∏•‡∏∞‡∏ï‡∏±‡∏ß) */
function typeWriter(text, element) {
    element.innerHTML = "";
    let i = 0;
    function type() {
        if (i < text.length) {
            element.innerHTML += text.charAt(i);
            i++;
            setTimeout(type, 50); // ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏û‡∏¥‡∏°‡∏û‡πå
        }
    }
    type();
}

/* 5. Scroll Reveal (‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡πÅ‡∏•‡πâ‡∏ß‡∏£‡∏π‡∏õ‡πÇ‡∏ú‡∏•‡πà) */
function setupScrollReveal() {
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add('show');
            }
        });
    }, { threshold: 0.1 });

    document.querySelectorAll('.card').forEach(el => observer.observe(el));
}

/* 6. Timer Logic */
function startTimer(startDate) {
    const start = new Date(startDate).getTime();
    setInterval(() => {
        const now = new Date().getTime();
        const diff = now - start;

        if (isNaN(diff)) return;

        const days = Math.floor(diff / (1000 * 60 * 60 * 24));
        const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const mins = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
        const secs = Math.floor((diff % (1000 * 60)) / 1000);

        document.getElementById('timer').innerHTML = `
            <div class="time-unit"><span class="number">${days}</span><span class="label">DAYS</span></div>
            <div class="time-unit"><span class="number">${hours}</span><span class="label">HRS</span></div>
            <div class="time-unit"><span class="number">${mins}</span><span class="label">MIN</span></div>
            <div class="time-unit"><span class="number">${secs}</span><span class="label">SEC</span></div>`;
    }, 1000);
}

/* 7. Background Floating Hearts */
setInterval(() => {
    const heart = document.createElement("div");
    heart.className = "heart-bg";
    heart.innerText = Math.random() > 0.5 ? "üíó" : "ü§ç"; // ‡∏™‡∏•‡∏±‡∏ö‡∏™‡∏µ‡∏´‡∏±‡∏ß‡πÉ‡∏à
    heart.style.left = Math.random() * 100 + "vw";
    heart.style.animationDuration = Math.random() * 3 + 4 + "s";
    heart.style.fontSize = Math.random() * 20 + 10 + "px";
    document.body.appendChild(heart);
    setTimeout(() => heart.remove(), 7000);
}, 800);

/* 8. Click Burst Effect (‡∏Ñ‡∏•‡∏¥‡∏Å‡πÅ‡∏•‡πâ‡∏ß‡∏´‡∏±‡∏ß‡πÉ‡∏à‡∏£‡∏∞‡πÄ‡∏ö‡∏¥‡∏î) */
document.addEventListener('click', (e) => {
    // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏´‡∏±‡∏ß‡πÉ‡∏à 5-8 ‡∏î‡∏ß‡∏á‡∏ï‡∏£‡∏á‡∏à‡∏∏‡∏î‡∏ó‡∏µ‡πà‡∏Ñ‡∏•‡∏¥‡∏Å
    const amount = 8;
    for (let i = 0; i < amount; i++) {
        const heart = document.createElement('div');
        heart.className = 'burst-heart';
        heart.innerText = "‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è";
        heart.style.left = e.clientX + 'px';
        heart.style.top = e.clientY + 'px';
        
        // ‡∏™‡∏∏‡πà‡∏°‡∏ó‡∏¥‡∏®‡∏ó‡∏≤‡∏á‡∏£‡∏∞‡πÄ‡∏ö‡∏¥‡∏î
        const angle = Math.random() * 360;
        const velocity = Math.random() * 100 + 50;
        const tx = Math.cos(angle * Math.PI / 180) * velocity;
        const ty = Math.sin(angle * Math.PI / 180) * velocity;
        
        heart.style.setProperty('--tx', `${tx}px`);
        heart.style.setProperty('--ty', `${ty}px`);
        
        document.body.appendChild(heart);
        setTimeout(() => heart.remove(), 800);
    }
});
</script>

</body>
</html>